var A=d=>{let{origins:c=["*"],maxAge:i,methods:l=["GET"],headers:g={}}=d,o,t={"content-type":"application/json","Access-Control-Allow-Methods":l.join(", "),...g};return i&&(t["Access-Control-Max-Age"]=i),{corsify:e=>{let{headers:n,status:s,body:r}=e;if(s===101)return e;let a=Object.fromEntries(n);return a["access-control-allow-origin"]||[301,302,308].includes(s)?e:new Response(r,{status:s,headers:{...a,...t,...o,"content-type":n.get("content-type")}})},preflight:e=>{let n=[...new Set(["OPTIONS",...l])],s=e.headers.get("origin");if(o=(c.includes(s)||c.includes("*"))&&{"Access-Control-Allow-Origin":s},e.method==="OPTIONS"){if(e.headers.get("Origin")!==null&&e.headers.get("Access-Control-Request-Method")!==null&&e.headers.get("Access-Control-Request-Headers")!==null){let r={...t,"Access-Control-Allow-Methods":n.join(", "),"Access-Control-Allow-Headers":e.headers.get("Access-Control-Request-Headers"),...o};return new Response(null,{headers:r})}return new Response(null,{headers:{Allow:n.join(", ")}})}}}};export{A as createCors};
